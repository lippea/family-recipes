{{ define "main" }}
<h1>{{ if eq .Type "tags" }}æ ‡ç­¾: {{ else if eq .Type "categories" }}åˆ†ç±»: {{ end }}{{ .Title }}</h1>

<div class="recipe-grid">
    {{ range .Pages }}
    <div class="recipe-card" data-tags='{{ if .Params.tags }}{{ .Params.tags | jsonify }}{{ else }}[]{{ end }}'>
        <a href="{{ .RelPermalink }}">
            {{ if .Params.image }}
            <img src="{{ .Params.image }}" alt="{{ .Title }}" class="recipe-card-image" loading="lazy">
            {{ end }}
            <div class="recipe-card-content">
                <h2>{{ .Title }}</h2>
                <div class="recipe-meta">
                    {{ if .Params.difficulty }}
                    <span>éš¾åº¦: {{ .Params.difficulty }}</span>
                    {{ end }}
                    {{ if .Params.servings }}
                    <span>ä»½é‡: {{ .Params.servings }} äºº</span>
                    {{ end }}
                </div>
                {{ if .Params.tags }}
                <div class="tags">
                    {{ range .Params.tags }}
                    {{ $tag := . }}
                    {{ if eq $.Type "categories" }}
                    <button type="button" class="tag filter-tag" data-tag="{{ $tag }}">{{ $tag }}</button>
                    {{ else }}
                    {{ range $.Site.Taxonomies.tags }}
                    {{ if eq .Page.Title $tag }}
                    <a href="{{ .Page.RelPermalink }}" class="tag">{{ $tag }}</a>
                    {{ end }}
                    {{ end }}
                    {{ end }}
                    {{ end }}
                </div>
                {{ end }}
                {{ if .Params.external_link }}
                <div style="margin-top: 0.5rem; font-size: 0.8rem; color: #666;">
                    ğŸ”— æœ‰å¤–éƒ¨é“¾æ¥
                </div>
                {{ end }}
            </div>
        </a>
    </div>
    {{ end }}
</div>
{{ end }}

